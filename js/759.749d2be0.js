"use strict";(self["webpackChunkcherish"]=self["webpackChunkcherish"]||[]).push([[759],{7759:function(t,e,s){s.r(e),s.d(e,{default:function(){return Q}});var a=s(3396),i=s(7139),l=s(9242);const o={class:"container mb-5 mb-lg-6"},r=(0,a.uE)('<div class="row justify-content-center mt-6 mt-lg-7"><div class="col-lg-10"><div class="d-flex justify-content-evenly align-items-center my-5"><div class="d-flex flex-column align-items-center bg-primary text-warning p-2"><i class="bi bi-cart-check fs-5 pb-2"></i><span class="border-top border-warning pt-2 ls">確認清單</span></div> &gt;&gt;&gt; <div class="d-flex flex-column align-items-center border border-primary p-2"><i class="bi bi-card-list fs-5 pb-2"></i><span class="border-top border-primary pt-2 ls">填寫資料</span></div> &gt;&gt;&gt; <div class="d-flex flex-column align-items-center border border-primary p-2"><i class="bi bi-coin fs-5 pb-2"></i><span class="border-top border-primary pt-2 ls">結帳付款</span></div></div></div></div>',1),n={key:0,class:"row"},c={class:"col-lg-8"},d={class:"text-end"},p=(0,a._)("i",{class:"bi bi-cart-x"},null,-1),u={class:"table border-primary table-hover"},m=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",{colspan:"2",class:"ls"},"購物車")])],-1),h={class:"py-3 d-flex align-items-center flex-column flex-md-row text-primary"},b=["src","alt"],g={class:"mt-3 mt-md-0",style:{width:"150px"}},y={class:"ls"},f={class:"d-flex flex-column text-primary border-bottom border-primary my-3",style:{width:"150px"}},_={class:"input-group"},C=["onClick","disabled"],v=["onUpdate:modelValue"],x=["onClick"],w={class:"mt-3 mt-md-0 ms-md-5"},k=(0,a._)("span",{class:"small text-muted pb-5 ls"},"小計：",-1),$=(0,a._)("br",{class:"d-none d-md-block"},null,-1),M=["onClick"],D=(0,a._)("i",{class:"bi bi-x-lg"},null,-1),L=[D],j={class:"col-lg-4"},N={class:"border border-primary p-3 text-primary pd-menu"},U={class:"d-flex justify-content-between align-items-center"},I=(0,a._)("p",{class:"mb-0 ls"},"商品總計",-1),q={class:"fs-4 mb-0"},z={class:"input-group my-3"},S=(0,a._)("hr",null,null,-1),Z={class:"d-flex justify-content-between align-items-center"},W=(0,a._)("p",{class:"mb-0 ls"},"應付金額",-1),T={key:0,class:"fs-3 mb-0"},V={key:1,class:"fs-3 mb-0"},B=(0,a._)("span",{class:"text-danger ls",style:{"font-size":"12px"}},"已打折",-1),H=(0,a._)("i",{class:"bi bi-arrow-right"},null,-1),Y={key:1,class:"text-primary text-center p-5 p-lg-6"},E=(0,a._)("p",{class:"fs-4 ls"},"您的購物車目前是空的唷！",-1),K=(0,a._)("i",{class:"bi bi-arrow-right"},null,-1);function P(t,e,s,D,P,A){const F=(0,a.up)("Loading"),G=(0,a.up)("router-link"),J=(0,a.up)("DelModal");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(F,{active:P.isLoading},null,8,["active"]),(0,a._)("div",o,[r,0!==P.carts.total?((0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",c,[(0,a._)("div",d,[(0,a._)("button",{type:"button",class:"btn btn-outline-danger mb-3",onClick:e[0]||(e[0]=(...t)=>A.openDelCartModal&&A.openDelCartModal(...t))},[(0,a.Uk)("清空購物車 "),p])]),(0,a._)("table",u,[m,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(P.carts.carts,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e.id},[(0,a._)("td",h,[(0,a.Wm)(G,{to:{path:`/product/${e.product_id}`},class:"d-md-flex align-items-md-center text-decoration-none text-center"},{default:(0,a.w5)((()=>[(0,a._)("img",{src:e.product.imageUrl,alt:e.product.title,style:{height:"150px"}},null,8,b),(0,a._)("div",g,[(0,a._)("h6",y,(0,i.zw)(e.product.title),1)])])),_:2},1032,["to"]),(0,a._)("form",f,[(0,a._)("div",_,[(0,a._)("button",{class:"btn btn-outline-primary fs-5 border-0 productNumBtn",type:"button",onClick:t=>A.updateCart(e,e.qty-1),disabled:1==e.qty},"– ",8,C),(0,a.wy)((0,a._)("input",{type:"number",id:"productNum",class:"form-control text-center","aria-label":"productNum",min:"1","onUpdate:modelValue":t=>e.qty=t,readonly:""},null,8,v),[[l.nr,e.qty,void 0,{number:!0}]]),(0,a._)("button",{class:"btn btn-outline-primary fs-5 border-0 productNumBtn",type:"button",onClick:t=>A.updateCart(e,e.qty+1)},"+ ",8,x)])]),(0,a._)("p",w,[k,$,(0,a.Uk)("NT$ "+(0,i.zw)(t.$filters.currency(e.total)),1)])]),(0,a._)("td",null,[(0,a._)("button",{type:"button",class:"btn",onClick:t=>A.openDelCartModal(e)},L,8,M)])])))),128))])])]),(0,a._)("div",j,[(0,a._)("div",N,[(0,a._)("div",U,[I,(0,a._)("p",q,"NT$ "+(0,i.zw)(t.$filters.currency(P.carts.total)),1)]),(0,a._)("div",z,[(0,a.wy)((0,a._)("input",{type:"text",placeholder:"請輸入優惠碼",class:"form-control border border-primary","onUpdate:modelValue":e[1]||(e[1]=t=>P.coupon_code=t),"aria-label":"couponNum"},null,512),[[l.nr,P.coupon_code]]),(0,a._)("button",{type:"button",class:"btn btn-outline-primary",onClick:e[2]||(e[2]=(...t)=>A.addCouponCode&&A.addCouponCode(...t))}," 套用優惠券 ")]),S,(0,a._)("div",Z,[W,P.carts.final_total==P.carts.total?((0,a.wg)(),(0,a.iD)("p",T," NT$ "+(0,i.zw)(t.$filters.currency(P.carts.total)),1)):((0,a.wg)(),(0,a.iD)("p",V,[B,(0,a.Uk)(" NT$ "+(0,i.zw)(t.$filters.currency(P.carts.final_total)),1)]))]),(0,a.Wm)(G,{to:"/order",type:"button",class:"btn btn-outline-primary w-100 mt-3 py-2"},{default:(0,a.w5)((()=>[(0,a.Uk)(" 填寫資料 "),H])),_:1})])])])):((0,a.wg)(),(0,a.iD)("div",Y,[E,(0,a.Wm)(G,{to:"/allProducts",type:"button",class:"btn btn-outline-primary btn-lg rounded-0 mt-3"},{default:(0,a.w5)((()=>[(0,a.Uk)(" 去逛逛商店 "),K])),_:1})]))]),(0,a.Wm)(J,{item:P.tempCart,ref:"delModal",onDelItem:A.removeCartItem},null,8,["item","onDelItem"])],64)}var A=s(5820),F=s(2090),G={data(){return{carts:{},status:{loadingItem:""},coupon_code:"",isLoading:!1,tempCart:{}}},components:{DelModal:F.Z},methods:{getCarts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/jewelry-api/cart";this.$http.get(t).then((t=>{t.data.success&&(this.carts=t.data.data,this.isLoading=!1)})).catch((t=>{this.$httpMessageState(t,"連線錯誤，請再試一次"),this.isLoading=!1}))},updateCart(t,e){this.isLoading=!0;const s=`https://vue3-course-api.hexschool.io/api/jewelry-api/cart/${t.id}`;this.status.loadingItem=t.id;const a={product_id:t.product_id,qty:e};this.$http.put(s,{data:a}).then((()=>{A.Z.emit("updateCart"),this.status.loadingItem="",this.getCarts(),this.isLoading=!1})).catch((t=>{this.$httpMessageState(t,"連線錯誤，請再試一次"),this.isLoading=!1}))},removeCartItem(){this.isLoading=!0;let t="https://vue3-course-api.hexschool.io/api/jewelry-api/carts";this.tempCart.id&&(t=`https://vue3-course-api.hexschool.io/api/jewelry-api/cart/${this.tempCart.id}`),this.$http.delete(t).then((t=>{this.$httpMessageState(t,"移除品項"),A.Z.emit("updateCart");const e=this.$refs.delModal;e.hideModal(),this.status.loadingItem="",this.getCarts(),this.isLoading=!1})).catch((t=>{this.$httpMessageState(t,"連線錯誤，請再試一次"),this.isLoading=!1}))},openDelCartModal(t){this.tempCart={...t};const e=this.$refs.delModal;e.showModal()},addCouponCode(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/jewelry-api/coupon",e={code:this.coupon_code};this.$http.post(t,{data:e}).then((t=>{this.$httpMessageState(t,"加入優惠券"),this.getCarts(),this.isLoading=!1})).catch((t=>{this.$httpMessageState(t,"加入優惠券")}))}},mounted(){A.Z.on("updateCart",this.getCarts),this.getCarts()},unmounted(){A.Z.off("updateCart",this.getCarts)}},J=s(89);const O=(0,J.Z)(G,[["render",P]]);var Q=O}}]);
//# sourceMappingURL=759.749d2be0.js.map