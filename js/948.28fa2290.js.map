{"version":3,"file":"js/948.28fa2290.js","mappings":"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","sources":["webpack://cherish/./src/views/UserOrder.vue","webpack://cherish/./src/views/UserOrder.vue?85b7"],"sourcesContent":["<template>\n  <Loading :active=\"isLoading\"/>\n  <div class=\"container mb-5 mb-lg-6\">\n    <div class=\"row justify-content-center mt-6 mt-lg-7\">\n      <div class=\"col-lg-10\">\n        <div class=\"d-flex justify-content-evenly align-items-center my-5\">\n          <div class=\"d-flex flex-column align-items-center border border-primary p-2\">\n            <i class=\"bi bi-cart-check fs-5 pb-2\"/>\n            <span class=\"border-top border-primary pt-2 ls\">確認清單</span>\n          </div>\n          >>>\n          <div class=\"d-flex flex-column align-items-center bg-primary text-warning p-2\">\n            <i class=\"bi bi-card-list fs-5 pb-2\"/>\n            <span class=\"border-top border-warning pt-2 ls\">填寫資料</span>\n          </div>\n          >>>\n          <div class=\"d-flex flex-column align-items-center border border-primary p-2\">\n            <i class=\"bi bi-coin fs-5 pb-2\"/>\n            <span class=\"border-top border-primary pt-2 ls\">結帳付款</span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"row\">\n      <!-- cart -->\n      <div class=\"col-lg-5\">\n        <table class=\"table border-primary border\">\n          <thead>\n            <tr>\n              <th colspan=\"2\" class=\"ls\">購物品項</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"item in carts.carts\" :key=\"item.id\">\n              <td class=\"py-3 d-flex align-items-center text-primary\">\n                <div class=\"d-flex align-items-center\">\n                  <img :src=\"item.product.imageUrl\"\n                    :alt=\"item.product.title\"\n                    style=\"height: 150px;\">\n                  <div class=\"ms-5\">\n                    <h6 class=\"ls\">{{ item.product.title }}</h6>\n                    <p class=\"mt-3\">\n                      <small class=\"text-muted ls\">數量：</small>\n                      {{ item.qty }}\n                      <small class=\"text-muted ms-1\">{{ item.product.unit }}</small>\n                    </p>\n                    <p class=\"mt-3\">NT$ {{ $filters.currency(item.total) }}</p>\n                  </div>\n                </div>\n              </td>\n            </tr>\n            <tr>\n              <td class=\"pt-3 ps-3\">\n                <small class=\"text-muted ls\">應付金額：</small>\n                <p class=\"fs-2\">\n                  NT$ {{ $filters.currency(carts.final_total) }}\n                  <span v-if=\"carts.final_total !== carts.total\"\n                    class=\"text-danger ms-2 ls\"\n                    style=\"font-size: 12px;\">\n                    已套用優惠券\n                  </span>\n                </p>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <!-- 回購物車 -->\n        <router-link to=\"/cart\" class=\"link-primary text-decoration-none link-hover ls\">\n          <i class=\"bi bi-arrow-left\"/> 回上頁\n        </router-link>\n      </div>\n      <!-- 訂購人表單 -->\n      <div class=\"col-lg-7\">\n        <Form class=\"mt-5 mt-lg-0\" @submit=\"createOrder\">\n          <template v-slot=\"{ errors }\">\n            <div class=\"mb-4\">\n              <p>NAME *</p>\n              <Field name=\"姓名\" type=\"text\"\n                class=\"form-control border-bottom border-primary\"\n                :class=\"{ 'is-invalid': errors['姓名'] }\"\n                placeholder=\"請輸入收件人姓名\" rules=\"required\"\n                v-model=\"form.user.name\"/>\n              <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"/>\n            </div>\n\n            <div class=\"mb-4\">\n              <p>EMAIL *</p>\n              <Field name=\"email\" type=\"email\"\n                class=\"form-control border-bottom border-primary\"\n                :class=\"{ 'is-invalid': errors['email'] }\"\n                placeholder=\"請輸入收件人 Email\" rules=\"email|required\"\n                v-model=\"form.user.email\"/>\n              <ErrorMessage name=\"email\" class=\"invalid-feedback\"/>\n            </div>\n\n            <div class=\"mb-4\">\n              <p>TEL *</p>\n              <Field name=\"電話\" type=\"tel\"\n                class=\"form-control border-bottom border-primary\"\n                :class=\"{ 'is-invalid': errors['電話'] }\"\n                placeholder=\"請輸入收件人手機\" :rules=\"isPhoneNumber\"\n                v-model=\"form.user.tel\"/>\n              <ErrorMessage name=\"電話\" class=\"invalid-feedback\"/>\n            </div>\n\n            <div class=\"mb-4\">\n              <p>ADDRESS *</p>\n              <Field name=\"地址\" type=\"text\"\n                class=\"form-control border-bottom border-primary\"\n                :class=\"{ 'is-invalid': errors['地址'] }\"\n                placeholder=\"請輸入收件地址\" rules=\"required\"\n                v-model=\"form.user.address\"/>\n              <ErrorMessage name=\"地址\" class=\"invalid-feedback\"/>\n            </div>\n\n            <div class=\"mb-4\">\n              <label for=\"buyerMessage\" class=\"form-label w-100\">REMARK\n                <textarea name=\"remark\"\n                  class=\"form-control border border-primary mt-3\"\n                  v-model=\"form.message\" style=\"height: 150px;\"/>\n              </label>\n            </div>\n            <div class=\"text-end\">\n              <button type=\"submit\" class=\"btn btn-outline-primary w-100 py-2\">\n                送出訂單 <i class=\"bi bi-arrow-right\"/>\n              </button>\n            </div>\n          </template>\n        </Form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport emitter from '@/methods/emitter';\n\nexport default {\n  data() {\n    return {\n      carts: {},\n      form: { // 訂單\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n      isLoading: false,\n    };\n  },\n  methods: {\n    getCarts() { // 取得購物車列表\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(api)\n        .then((res) => {\n          if (res.data.success) {\n            this.carts = res.data.data;\n            this.isLoading = false;\n          }\n        })\n        .catch((err) => {\n          this.$httpMessageState(err, '連線錯誤，請再試一次');\n          this.isLoading = false;\n        });\n    },\n    createOrder() { // 訂單\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\n      const order = this.form;\n      this.$http.post(api, { data: order })\n        .then((res) => {\n          if (res.data.success) {\n            const id = res.data.orderId;\n            this.$router.push(`pay/${id}`);\n            emitter.emit('updateCart'); // 與 navCart 同步更新\n            this.$httpMessageState(res, '建立訂單'); // toast\n            this.isLoading = false;\n          }\n        })\n        .catch((err) => {\n          this.$httpMessageState(err, '連線錯誤，請再試一次');\n          this.isLoading = false;\n        });\n    },\n    isPhoneNumber(value) { // 表單電話號碼驗證\n      const phoneNumber = /^[0-9]{10}$/;\n      return phoneNumber.test(value) ? true : '電話 為必填';\n    },\n  },\n  mounted() {\n    this.getCarts();\n  },\n};\n</script>\n","import { render } from \"./UserOrder.vue?vue&type=template&id=222409a2\"\nimport script from \"./UserOrder.vue?vue&type=script&lang=js\"\nexport * from \"./UserOrder.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","colspan","style","for","type","_createVNode","_component_Loading","active","$data","isLoading","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_createElementBlock","_Fragment","_renderList","carts","item","key","id","_hoisted_7","_hoisted_8","src","product","imageUrl","alt","title","_hoisted_10","_hoisted_11","_toDisplayString","_hoisted_12","_hoisted_13","qty","_hoisted_14","unit","_hoisted_15","_ctx","$filters","currency","total","_hoisted_16","_hoisted_17","_hoisted_18","final_total","_hoisted_19","_component_router_link","to","_hoisted_20","_hoisted_21","_component_Form","onSubmit","$options","createOrder","errors","_hoisted_22","_hoisted_23","_component_Field","name","_normalizeClass","placeholder","rules","form","user","$event","_component_ErrorMessage","_hoisted_24","_hoisted_25","email","_hoisted_26","_hoisted_27","isPhoneNumber","tel","_hoisted_28","_hoisted_29","address","_hoisted_30","_hoisted_31","message","_hoisted_32","data","methods","getCarts","this","api","$http","get","then","res","success","catch","err","$httpMessageState","order","post","orderId","$router","push","emitter","emit","value","phoneNumber","test","mounted","__exports__","render"],"sourceRoot":""}