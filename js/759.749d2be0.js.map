{"version":3,"file":"js/759.749d2be0.js","mappings":"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","sources":["webpack://cherish/./src/views/UserCart.vue","webpack://cherish/./src/views/UserCart.vue?698a"],"sourcesContent":["<template>\n  <Loading :active=\"isLoading\"/>\n  <div class=\"container mb-5 mb-lg-6\">\n    <div class=\"row justify-content-center mt-6 mt-lg-7\">\n      <div class=\"col-lg-10\">\n        <div class=\"d-flex justify-content-evenly align-items-center my-5\">\n          <div class=\"d-flex flex-column align-items-center bg-primary text-warning p-2\">\n              <i class=\"bi bi-cart-check fs-5 pb-2\"/>\n              <span class=\"border-top border-warning pt-2 ls\">確認清單</span>\n          </div>\n          >>>\n          <div class=\"d-flex flex-column align-items-center border border-primary p-2\">\n              <i class=\"bi bi-card-list fs-5 pb-2\"/>\n              <span class=\"border-top border-primary pt-2 ls\">填寫資料</span>\n          </div>\n          >>>\n          <div class=\"d-flex flex-column align-items-center border border-primary p-2\">\n              <i class=\"bi bi-coin fs-5 pb-2\"/>\n              <span class=\"border-top border-primary pt-2 ls\">結帳付款</span>\n          </div>\n        </div>\n      </div>\n    </div>\n    <!-- 購物車有商品 -->\n    <div class=\"row\" v-if=\"carts.total !== 0\">\n      <!-- 購物清單 -->\n      <div class=\"col-lg-8\">\n        <div class=\"text-end\">\n          <button type=\"button\"\n            class=\"btn btn-outline-danger mb-3\"\n            @click=\"openDelCartModal\">清空購物車\n            <i class=\"bi bi-cart-x\"/>\n          </button>\n        </div>\n        <table class=\"table border-primary table-hover\">\n          <thead>\n            <tr>\n              <th colspan=\"2\" class=\"ls\">購物車</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"item in carts.carts\" :key=\"item.id\">\n              <td class=\"py-3 d-flex align-items-center flex-column flex-md-row text-primary\">\n                <router-link :to=\"{ path:`/product/${item.product_id}` }\"\n                  class=\"d-md-flex align-items-md-center text-decoration-none text-center\">\n                    <img :src=\"item.product.imageUrl\"\n                      :alt=\"item.product.title\"\n                      style=\"height: 150px;\">\n                    <div class=\"mt-3 mt-md-0\" style=\"width: 150px;\">\n                      <h6 class=\"ls\">{{ item.product.title }}</h6>\n                    </div>\n                </router-link>\n                <form class=\"d-flex flex-column text-primary border-bottom border-primary my-3\"\n                  style=\"width: 150px;\">\n                    <div class=\"input-group\">\n                      <button class=\"btn btn-outline-primary fs-5 border-0 productNumBtn\"\n                        type=\"button\"\n                        @click=\"updateCart(item, item.qty - 1)\"\n                        :disabled=\"item.qty == 1\">–\n                      </button>\n                      <input type=\"number\"\n                        id=\"productNum\"\n                        class=\"form-control text-center\"\n                        aria-label=\"productNum\" min=\"1\"\n                        v-model.number=\"item.qty\"\n                        readonly>\n                      <button class=\"btn btn-outline-primary fs-5 border-0 productNumBtn\"\n                        type=\"button\"\n                        @click=\"updateCart(item, item.qty + 1)\">+\n                      </button>\n                    </div>\n                </form>\n                <p class=\"mt-3 mt-md-0 ms-md-5\">\n                  <span class=\"small text-muted pb-5 ls\">小計：</span>\n                  <br class=\"d-none d-md-block\">NT$ {{ $filters.currency(item.total) }}\n                </p>\n              </td>\n              <td>\n                <button type=\"button\" class=\"btn\" @click=\"openDelCartModal(item)\">\n                    <i class=\"bi bi-x-lg\"/>\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <!-- 總計 & 優惠碼 -->\n      <div class=\"col-lg-4\">\n        <div class=\"border border-primary p-3 text-primary pd-menu\">\n          <div class=\"d-flex justify-content-between align-items-center\">\n            <p class=\"mb-0 ls\">商品總計</p>\n            <p class=\"fs-4 mb-0\">NT$ {{ $filters.currency(carts.total) }}</p>\n          </div>\n          <div class=\"input-group my-3\">\n            <input type=\"text\"\n              placeholder=\"請輸入優惠碼\"\n              class=\"form-control border border-primary\"\n              v-model=\"coupon_code\"\n              aria-label=\"couponNum\" />\n            <button type=\"button\" class=\"btn btn-outline-primary\" @click=\"addCouponCode\">\n              套用優惠券\n            </button>\n          </div>\n        <hr>\n          <div class=\"d-flex justify-content-between align-items-center\">\n            <p class=\"mb-0 ls\">應付金額</p>\n            <!-- 原價 -->\n            <p v-if=\"carts.final_total == carts.total\" class=\"fs-3 mb-0\">\n              NT$ {{ $filters.currency(carts.total) }}\n            </p>\n            <!-- 折價 -->\n            <p v-else class=\"fs-3 mb-0\">\n              <span class=\"text-danger ls\" style=\"font-size: 12px;\">已打折</span>\n              NT$ {{ $filters.currency(carts.final_total) }}\n            </p>\n          </div>\n          <router-link to=\"/order\" type=\"button\" class=\"btn btn-outline-primary w-100 mt-3 py-2\">\n            填寫資料 <i class=\"bi bi-arrow-right\"/>\n          </router-link>\n        </div>\n      </div>\n    </div>\n    <!-- 購物車無商品 -->\n    <div class=\"text-primary text-center p-5 p-lg-6\" v-else>\n        <p class=\"fs-4 ls\">您的購物車目前是空的唷！</p>\n        <router-link to=\"/allProducts\"\n          type=\"button\"\n          class=\"btn btn-outline-primary btn-lg rounded-0 mt-3\">\n          去逛逛商店 <i class=\"bi bi-arrow-right\"/>\n        </router-link>\n    </div>\n  </div>\n  <DelModal :item=\"tempCart\" ref=\"delModal\" @del-item=\"removeCartItem\"/>\n</template>\n\n<script>\nimport emitter from '@/methods/emitter';\nimport DelModal from '@/components/DelModal.vue';\n\nexport default {\n  data() {\n    return {\n      carts: {},\n      status: {\n        loadingItem: '', // 對應品項 id\n      },\n      coupon_code: '',\n      isLoading: false,\n      tempCart: {},\n    };\n  },\n  components: {\n    DelModal,\n  },\n  methods: {\n    getCarts() { // 取得購物車資料\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(api)\n        .then((res) => {\n          if (res.data.success) {\n            this.carts = res.data.data;\n            this.isLoading = false;\n          }\n        })\n        .catch((err) => {\n          this.$httpMessageState(err, '連線錯誤，請再試一次');\n          this.isLoading = false;\n        });\n    },\n    updateCart(item, qty) { // 更新購物車\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${item.id}`;\n      this.status.loadingItem = item.id;\n      const cart = {\n        product_id: item.product_id,\n        qty,\n      };\n      this.$http.put(api, { data: cart })\n        .then(() => {\n          emitter.emit('updateCart'); // 與 navCart 同步更新\n          this.status.loadingItem = '';\n          this.getCarts();\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          this.$httpMessageState(err, '連線錯誤，請再試一次');\n          this.isLoading = false;\n        });\n    },\n    removeCartItem() { // 移除商品\n      this.isLoading = true;\n      let api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/carts`;\n      if (this.tempCart.id) {\n        api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${this.tempCart.id}`;\n      }\n      this.$http.delete(api)\n        .then((res) => {\n          this.$httpMessageState(res, '移除品項'); // toast\n          emitter.emit('updateCart'); // 與 navCart 同步更新\n          const delComponent = this.$refs.delModal;\n          delComponent.hideModal();\n          this.status.loadingItem = '';\n          this.getCarts();\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          this.$httpMessageState(err, '連線錯誤，請再試一次');\n          this.isLoading = false;\n        });\n    },\n    openDelCartModal(item) { // 開啟刪除商品 Modal\n      this.tempCart = { ...item };\n      const delComponent = this.$refs.delModal;\n      delComponent.showModal();\n    },\n    addCouponCode() { // 新增優惠券\n      this.isLoading = true;\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/coupon`;\n      const coupon = {\n        code: this.coupon_code,\n      };\n      this.$http.post(api, { data: coupon })\n        .then((res) => {\n          this.$httpMessageState(res, '加入優惠券');\n          this.getCarts();\n          this.isLoading = false;\n        })\n        .catch((err) => {\n          this.$httpMessageState(err, '加入優惠券');\n        });\n    },\n  },\n  mounted() {\n    emitter.on('updateCart', this.getCarts);\n    this.getCarts();\n  },\n  unmounted() {\n    emitter.off('updateCart', this.getCarts);\n  },\n};\n</script>\n","import { render } from \"./UserCart.vue?vue&type=template&id=ea6607d8\"\nimport script from \"./UserCart.vue?vue&type=script&lang=js\"\nexport * from \"./UserCart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","colspan","style","_hoisted_22","_createVNode","_component_Loading","active","$data","isLoading","_hoisted_1","_hoisted_2","carts","total","_createElementBlock","_hoisted_3","_hoisted_4","_hoisted_5","type","onClick","_cache","args","$options","openDelCartModal","_hoisted_6","_hoisted_7","_hoisted_8","_Fragment","_renderList","item","key","id","_hoisted_9","_component_router_link","to","path","product_id","src","product","imageUrl","alt","title","_hoisted_11","_hoisted_12","_toDisplayString","_hoisted_13","_hoisted_14","$event","updateCart","qty","disabled","_hoisted_15","min","readonly","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_ctx","$filters","currency","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","placeholder","coupon_code","addCouponCode","_hoisted_30","_hoisted_31","_hoisted_32","final_total","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_component_DelModal","tempCart","ref","onDelItem","removeCartItem","data","status","loadingItem","components","DelModal","methods","getCarts","this","api","$http","get","then","res","success","catch","err","$httpMessageState","cart","put","emitter","emit","delete","delComponent","$refs","delModal","hideModal","showModal","coupon","code","post","mounted","on","unmounted","off","__exports__","render"],"sourceRoot":""}