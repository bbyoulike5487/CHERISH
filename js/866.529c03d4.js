"use strict";(self["webpackChunkcherish"]=self["webpackChunkcherish"]||[]).push([[866],{2393:function(t,e){e.Z={saveLocal(t){const e=JSON.stringify(t);localStorage.setItem("favoriteItems",e)},getLocal(){return JSON.parse(localStorage.getItem("favoriteItems"))}}},3866:function(t,e,s){s.r(e),s.d(e,{default:function(){return ot}});var i=s(3396),r=s(7139),o=s(9242);const a={class:"container"},c={class:"mt-6 mt-lg-7"},d={"aria-label":"breadcrumb"},l={class:"breadcrumb"},n={class:"breadcrumb-item"},u={class:"breadcrumb-item active","aria-current":"page"},p={class:"row row-cols-1 row-cols-md-2 g-4"},m={class:"col-lg-5",style:{height:"600px",overflow:"hidden"}},h=["src"],g={class:"col-lg-6"},b={class:"d-flex justify-content-between text-primary mb-3"},y={class:"ls mb-0"},f={class:"text-muted lh-lg ls"},v=(0,i._)("hr",null,null,-1),_={class:"d-flex align-items-end"},w={key:0,class:"h4 mb-0"},x={key:1,class:"h4 text-danger me-3 mb-0"},k={key:2,class:"h6 text-muted me-3 mb-0"},$={key:3,class:"text-danger border border-danger px-1 mb-0 ls",style:{"font-size":"10px"}},I=(0,i._)("hr",null,null,-1),L={class:"ls mb-4"},C={class:"text-muted"},N=(0,i._)("span",{class:"text-primary"},"規格｜",-1),T=(0,i.uE)('<p class="text-muted"><span class="text-primary">產地｜</span> 台灣 </p><p class="text-muted"><span class="text-primary">付款方式｜</span> 超商貨到付款、信用卡一次付清、LINE Pay </p><p class="text-muted"><span class="text-primary">配送方式｜</span> 超商取貨、宅配 </p>',3),z={class:"d-flex justify-content-between mb-4"},D={class:"d-flex flex-column text-primary border-bottom border-primary"},P={for:"productNum",class:"form-label fs-4 ls"},Z={class:"input-group"},Q=["disabled"],S={class:"d-flex align-items-end"},q={key:0,class:"bi bi-suit-heart-fill"},F={key:1,class:"bi bi-suit-heart"},j={class:"d-flex"},M=["disabled"],U=(0,i._)("p",{class:"text-primary mt-5 mt-lg-6 ls"},"看看其他商品 ...",-1),E={class:"row row-cols-2 row-cols-lg-6 mb-5 mb-lg-6"},H=["onClick","onKeydown"],K={class:"imageHover"},O=["src","alt"],A={class:"card-body text-primary bg-warning px-0 d-flex flex-column justify-content-between"},B={class:"ls"},J={class:"d-flex"},W={key:0,class:"text-danger border border-danger px-1 mb-1 ls",style:{"font-size":"10px"}},Y={class:"d-flex align-items-end"},V={key:0},G={key:1,class:"text-danger"},R={key:2,class:"small text-muted ms-2"};function X(t,e,s,X,tt,et){const st=(0,i.up)("Loading"),it=(0,i.up)("router-link");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(st,{active:tt.isLoading},null,8,["active"]),(0,i._)("div",a,[(0,i._)("div",c,[(0,i._)("nav",d,[(0,i._)("ol",l,[(0,i._)("li",n,[(0,i.Wm)(it,{to:"/allProducts",class:"link-secondary text-decoration-none border-bottom border-secondary"},{default:(0,i.w5)((()=>[(0,i.Uk)(" 所有商品 ")])),_:1})]),(0,i._)("li",u,(0,r.zw)(tt.product.title),1)])])]),(0,i._)("div",p,[(0,i._)("div",m,[(0,i._)("img",{src:tt.product.imageUrl,alt:"productImage",class:"img-fluid mb-3",style:{"object-fit":"cover"}},null,8,h)]),(0,i._)("div",g,[(0,i._)("div",b,[(0,i._)("h2",y,(0,r.zw)(tt.product.title),1)]),(0,i._)("div",f,(0,r.zw)(tt.product.content),1),v,(0,i._)("div",_,[tt.product.price===tt.product.origin_price?((0,i.wg)(),(0,i.iD)("div",w," NT$ "+(0,r.zw)(t.$filters.currency(tt.product.origin_price)),1)):(0,i.kq)("",!0),tt.product.price!==tt.product.origin_price?((0,i.wg)(),(0,i.iD)("div",x," NT$ "+(0,r.zw)(t.$filters.currency(tt.product.price)),1)):(0,i.kq)("",!0),tt.product.price!==tt.product.origin_price?((0,i.wg)(),(0,i.iD)("del",k," NT$ "+(0,r.zw)(t.$filters.currency(tt.product.origin_price)),1)):(0,i.kq)("",!0),tt.product.price!==tt.product.origin_price?((0,i.wg)(),(0,i.iD)("p",$," SALE ")):(0,i.kq)("",!0)]),I,(0,i._)("div",L,[(0,i._)("p",C,[N,(0,i.Uk)(" "+(0,r.zw)(tt.product.description),1)]),T]),(0,i._)("div",z,[(0,i._)("form",D,[(0,i._)("label",P,[(0,i.Uk)("數量 "),(0,i._)("div",Z,[(0,i._)("button",{class:"btn btn-outline-primary fs-5 border-0 productNumBtn",type:"button",onClick:e[0]||(e[0]=t=>et.refreshQty(-1)),disabled:1===tt.productQty},"– ",8,Q),(0,i.wy)((0,i._)("input",{type:"number",id:"productNum",class:"form-control text-center","aria-label":"productNum",min:"1","onUpdate:modelValue":e[1]||(e[1]=t=>tt.productQty=t)},null,512),[[o.nr,tt.productQty]]),(0,i._)("button",{class:"btn btn-outline-primary fs-5 border-0 productNumBtn",type:"button",onClick:e[2]||(e[2]=t=>et.refreshQty(1))},"+ ")])])]),(0,i._)("div",S,[(0,i._)("button",{type:"button",class:"text-primary bg-warning fs-3 border-0 mx-1",onClick:e[3]||(e[3]=t=>et.toggleFavorite(tt.product))},[tt.favoriteItems.includes(tt.product.id)?((0,i.wg)(),(0,i.iD)("i",q)):((0,i.wg)(),(0,i.iD)("i",F))])])]),(0,i._)("div",j,[(0,i._)("button",{type:"button",class:"btn btn-primary w-50 py-2 me-3",onClick:e[4]||(e[4]=t=>et.goToCart(tt.product.id))}," 立即購買 "),(0,i._)("button",{type:"button",class:"btn btn-outline-primary w-50 py-2",disabled:this.status.loadingItem===tt.product.id,onClick:e[5]||(e[5]=t=>et.addToCart(tt.product.id))}," 加入購物車 ",8,M)])])]),U,(0,i._)("div",E,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(tt.others,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"col px-2 mb-3",key:e.id},[(0,i._)("div",{class:"card border-0 h-100 cardHover",onClick:(0,o.iM)((t=>et.goToProduct(e.id)),["prevent"]),onKeydown:t=>et.goToProduct(e.id)},[(0,i._)("div",K,[(0,i._)("img",{src:e.imageUrl,class:"card-img-top img-fluid",alt:e.title},null,8,O)]),(0,i._)("div",A,[(0,i._)("p",B,(0,r.zw)(e.title),1),(0,i._)("div",J,[e.price!==e.origin_price?((0,i.wg)(),(0,i.iD)("p",W," SALE ")):(0,i.kq)("",!0)]),(0,i._)("div",Y,[e.price===e.origin_price?((0,i.wg)(),(0,i.iD)("div",V," NT$ "+(0,r.zw)(t.$filters.currency(e.origin_price)),1)):(0,i.kq)("",!0),e.price!==e.origin_price?((0,i.wg)(),(0,i.iD)("div",G," NT$ "+(0,r.zw)(t.$filters.currency(e.price)),1)):(0,i.kq)("",!0),e.price!==e.origin_price?((0,i.wg)(),(0,i.iD)("del",R," NT$ "+(0,r.zw)(t.$filters.currency(e.origin_price)),1)):(0,i.kq)("",!0)])])],40,H)])))),128))])])],64)}s(560);var tt=s(5820),et=s(2393),st={data(){return{product:{},id:"",productQty:1,favoriteItems:et.Z.getLocal()||[],status:{loadingItem:""},others:[],isLoading:!1}},methods:{getProduct(){this.isLoading=!0;const t=`https://vue3-course-api.hexschool.io/api/jewelry-api/product/${this.id}`;this.$http.get(t).then((t=>{t.data.success&&(this.product=t.data.product,this.isLoading=!1)})).catch((t=>{this.$httpMessageState(t,"連線錯誤，請再試一次"),this.isLoading=!1}))},otherProducts(){this.isLoading=!0;const t="https://vue3-course-api.hexschool.io/api/jewelry-api/products/all";this.$http.get(t).then((t=>{t.data.success&&(this.others=t.data.products.filter((t=>t.id!==this.id)).sort((()=>Math.random()-.5)).splice(1,6),this.isLoading=!1)})).catch((t=>{this.$httpMessageState(t,"連線錯誤，請再試一次"),this.isLoading=!1}))},addToCart(t,e=this.productQty){const s="https://vue3-course-api.hexschool.io/api/jewelry-api/cart";this.status.loadingItem=t;const i={product_id:t,qty:e};this.$http.post(s,{data:i}).then((t=>{tt.Z.emit("updateCart"),this.status.loadingItem="",this.$httpMessageState(t,"加入購物車"),this.productQty=1})).catch((t=>{this.$httpMessageState(t,"連線錯誤，請再試一次")}))},refreshQty(t){this.productQty+=t},goToCart(t,e=1){this.addToCart(t,e),this.$router.push("/cart")},toggleFavorite(t){this.favoriteItems.includes(t.id)?(this.favoriteItems.splice(this.favoriteItems.indexOf(t.id),1),tt.Z.emit("push-message",{style:"success",title:"已從收藏清單中移除"})):(this.favoriteItems.push(t.id),tt.Z.emit("push-message",{style:"success",title:"已新增至收藏清單"})),et.Z.saveLocal(this.favoriteItems),tt.Z.emit("updateFavorite")},updateFavorite(){this.favoriteItems=et.Z.getLocal(),this.getProduct()},goToProduct(t){this.$router.push(`/product/${t}`),this.id=t,this.getProduct(),this.otherProducts()}},mounted(){this.id=this.$route.params.productId,this.getProduct(),tt.Z.on("updateFavorite",this.updateFavorite),this.otherProducts()},unmounted(){tt.Z.off("updateFavorite",this.updateFavorite)}},it=s(89);const rt=(0,it.Z)(st,[["render",X]]);var ot=rt}}]);
//# sourceMappingURL=866.529c03d4.js.map